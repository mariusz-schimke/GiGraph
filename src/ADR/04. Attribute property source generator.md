# 04. Attribute property source generator

Date: 2025-02-22

## Context

The graph and all elements expose properties that are mapped to DOT attribute keys. Since all property implementations look the same, there is a lot of boilerplate code. Also, since the library enables the use of lambda expressions to get or set attributes or to get attribute mappings as metadata, all those properties are annotated with the *DotAttributeKey* attribute. This makes it easy to auto-generate property bodies because the DOT key is known for each of them.

## Decision

1. All partial properties annotated with the *DotAttributeKey* attribute are defined automatically by a dedicated source generator.
2. All properties that represent DOT attributes should be auto-generated, unless it's impossible for some reason (like explicit interface implementations).
3. There are unit tests that cover several test scenarios for every such property:
   1. check if the property is settable and if it returns the same value as previously set by the test,
   2. check if the property sets an attribute with a key equal to the one specified in its annotation,
   3. all properties have the right attribute key (since some are overridden in inheritance). This is covered by a snapshot file with a graph script where the graph contains all supported elements and they all of them, including the graph, contain all attributes they support.

## Consequences

1. There is much less boilerplate code.
1. The risk of assigning different keys to a getter and setter or to the property attribute is mitigated.